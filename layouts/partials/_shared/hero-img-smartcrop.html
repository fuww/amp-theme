{{/* Using variable, otherwise Hugo might resize the same image twice.  */}}
{{/* 16:9 Lighthouse mobile test uses Nexus 5X 412px */}}
{{/*  You can use aspect ratio in amp-img width and height*/}}

{{/* 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 1280:263 */}}

{{/* 2560x526 */}}

{{ $imageSrc := .featured }}
{{/*  {{ $imageSrc := (.Resources.ByType "image").GetMatch $page.Params.image }} */}}
{{ $placeholder := $imageSrc.Resize "36x6 smart q20" }}
{{ $placeholder = $placeholder.Filter (images.GaussianBlur 6) }}
{{ $placeholder_lg := $imageSrc.Resize "64x18 smart q20" }}
{{ $placeholder_lg = $placeholder_lg.Filter (images.GaussianBlur 6) }}

{{ $resized2560 := $imageSrc.Fill "2560x421 smart" }}
{{ $resized1440 := $imageSrc.Fill "1440x960 smart" }}

{{ $resized1200 := $imageSrc.Fill "1200x247 smart" }}
{{ $resized720 := $imageSrc.Fill "600x123 smart" }}

{{ $360x240 := $imageSrc.Fill "360x240 smart" }}
{{ $375x230 := $imageSrc.Fill "375x230 smart" }}
{{ $720x480 := $imageSrc.Fill "720x480 smart" }}
{{ $1440x960 := $imageSrc.Fill "1440x960 smart" }}

{{ $2560x421 := $imageSrc.Fill "2560x421 smart" }}
{{ $2048x337 := $imageSrc.Fill "2048x337 smart" }}
{{ $1366x225 := $imageSrc.Fill "1366x225 smart" }}
{{ $786x126 := $imageSrc.Fill "786x126 smart" }}
{{ $375x62 := $imageSrc.Fill "375x62 smart" }}

{{ $figcaption := .Params.figcaption }}

<figure class="m0">
    <div>
        <amp-img data-hero src="{{ $375x230.RelPermalink }}" srcset="
        {{ $1440x960.RelPermalink }} 1440w,
        {{ $720x480.RelPermalink }} 720w,
        {{ $375x230.RelPermalink }} 375w,
        {{ $360x240.RelPermalink }} 360w
    " alt="{{ .Title }}" layout="responsive" width="{{ $360x240.Width }}" height="{{ $360x240.Height }}"
            class="md-hide lg-hide">
            <amp-img placeholder src="{{ $placeholder.RelPermalink }}" layout="fill">
            </amp-img>
        </amp-img>

        <amp-img data-hero src="{{ $2560x421.RelPermalink }}" srcset="
        {{ $2560x421.RelPermalink }} 2560w,
    {{ $2048x337.RelPermalink }} 2048w,
    {{ $1366x225.RelPermalink }} 1366w,
    {{ $786x126.RelPermalink }} 768w,
    {{ $375x62.RelPermalink }} 375w
        " alt="{{ .Title }}" layout="responsive" width="{{ $375x62.Width }}" height="{{ $375x62.Height }}"
            class="xs-hide sm-hide">
            <amp-img placeholder src="{{ ($placeholder_lg).RelPermalink }}" layout="fill">
            </amp-img>
        </amp-img>

    </div>
    {{ with .Page.Params.figcaption }}
    <figcaption class="pl2 mt1 z1 imageCaption">{{ . }}</figcaption>
</figure>
{{ end }}
</figure>



{{/* 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 3:2 */}}

<!-- {{ $imageSrc := .featured }}
{{/*  {{ $imageSrc := (.Resources.ByType "image").GetMatch $page.Params.image }} */}}
{{ $placeholder := $imageSrc.Resize "48x32 smart q20" }}
{{ $placeholder = $placeholder.Filter (images.GaussianBlur 6) }}

{{ $resized1200 := $imageSrc.Fill "1200x800 smart" }}
{{ $resized720 := $imageSrc.Fill "600x400 smart" }}

<figure class="m0 sm-m0 md-m3 lg-m4">
    <amp-img src="{{ $resized1200.RelPermalink }}" srcset="
    {{ $resized1200.RelPermalink }} 1200w,
    {{ $resized720.RelPermalink }} 720w,
    {{ ($imageSrc.Fill "300x200 smart").RelPermalink }} 300w
    " alt="{{ .Title }}" layout="responsive" width="3" height="2">
        <amp-img placeholder src="{{ $placeholder.RelPermalink }}" layout="fill">
        </amp-img>
    </amp-img>
</figure> -->





{{/* 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 1:1 */}}

{{/*
{{ if isset .Params "image" }}

{{ $page := . }}
{{ $imageSrc := (.Resources.ByType "image").GetMatch $page.Params.image }}
{{ $placeholder := $imageSrc.Resize "48x48 smart q20" }}

{{ $resized1200 := $imageSrc.Fill "1200x1200 smart" }}
{{ $resized720 := $imageSrc.Fill "720x720 smart" }}

<div class="header-image">
    <figure class="grid-column-full">
        <amp-img src="{{ $resized1200.RelPermalink }}" srcset="
    {{ $resized1200.RelPermalink }} 1200w,
    {{ $resized720.RelPermalink }} 720w,
    {{ ($imageSrc.Fill "412x412 smart").RelPermalink }} 412w,
    {{ ($imageSrc.Fill "368x368 smart").RelPermalink }} 368w
    " alt="{{ .Title }}" layout="responsive" width="1" height="1">
            <amp-img placeholder src="{{ $placeholder.RelPermalink }}" layout="fill">
            </amp-img>
        </amp-img>
        {{ if isset .Params "caption" }}
        <figcaption class="imageCaption">{{ $page.Params.caption}}</figcaption>
        {{ end }}
    </figure>
</div>
{{ end }}


{{/* 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 16:9 */}}
{{/*
{{ if isset .Params "image" }}

{{ $page := . }}
{{ $imageSrc := (.Resources.ByType "image").GetMatch $page.Params.image }}
{{ $placeholder := $imageSrc.Resize "48x48 smart q20" }}

{{ $resized1200 := $imageSrc.Fill "1200x675 smart" }}
{{ $resized720 := $imageSrc.Fill "720x405 smart" }}

<div class="header-image">
    <figure class="grid-column-full">
        <amp-img src="{{ $resized1200.RelPermalink }}" srcset="
    {{ $resized1200.RelPermalink }} 1200w,
    {{ $resized720.RelPermalink }} 720w,
    {{ ($imageSrc.Fill "412x232 smart").RelPermalink }} 412w,
    {{ ($imageSrc.Fill "368x207 smart").RelPermalink }} 368w
    " alt="{{ .Title }}" layout="responsive" width="16" height="9">
            <amp-img placeholder src="{{ $placeholder.RelPermalink }}" layout="fill">
            </amp-img>
        </amp-img>
    </figure>
</div>
{{ end }}
*/}}
